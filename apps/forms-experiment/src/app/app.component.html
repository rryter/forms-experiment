<ng-container *ngIf="vm$ | async as vm">
  <div class="jumbotron">
    <h1 class="display-4">TDRF!</h1>
    <p class="lead">Template Driven Reactive Forms</p>

    <p>
      This is a demo page, to illustrate the concept of
      <a
        href="https://blog.simplified.courses/say-goodbye-to-custom-form-validators-in-angular/"
        >template driven, reactive forms</a
      >
      by
      <a href="https://www.simplified.courses/about" target="_blank"
        >Brecht Billiet</a
      >.<br />This example uses
      <a href="https://zod.dev/" target="_blank">Zod</a> for form validations
      instead of <a href="https://vestjs.dev/" target="_blank">Vest</a>.
    </p>
    <hr class="my-4" />
  </div>

  <div class="row">
    <div class="col">
      <div class="col"><h1>Add user</h1></div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <form
        style="position: relative"
        [formData]="vm.user"
        [validations]="userValidations"
        #form="ngForm"
        (ngSubmit)="submit()"
      >
        <fieldset>
          <div inputWrapper>
            <label class="form-group">
              <span class="form-group__label">First name</span>
              <input
                type="text"
                [ngModel]="vm.user.firstName"
                name="firstName"
              />
            </label>
          </div>

          <div inputWrapper>
            <label class="form-group">
              <span class="form-group__label">Last name</span>
              <input type="text" [ngModel]="vm.user.lastName" name="lastName" />
            </label>
          </div>

          <!-- <fe-select [selectedValue]="vm.user.country22"></fe-select> -->
        </fieldset>

        <fe-address-form [address]="vm.user.address"> </fe-address-form>
        <fe-address-form [address]="vm.user.address" name="companyAddress">
        </fe-address-form>
        <!-- <fe-password-form [passwords]="vm.user.passwords"></fe-password-form> -->

        <button class="btn btn-light" type="button" (click)="reset()">
          reset
        </button>
        &nbsp;
        <button class="btn btn-light" type="button" (click)="resetEmpty()">
          clear
        </button>
        &nbsp;
        <button class="btn btn-primary">Submit form</button>
      </form>
    </div>

    <div class="col">
      <div class="card">
        <h3>Form Status</h3>
        <div>
          <span class="badge text-bg-primary" *ngIf="form.dirty"> dirty </span>
          <span class="badge text-bg-primary" *ngIf="form.pristine">
            pristine
          </span>
          <span class="badge text-bg-primary" *ngIf="form.valid"> valid </span>
          <span class="badge text-bg-primary" *ngIf="form.disabled">
            disabled
          </span>

          <span class="badge text-bg-primary" *ngIf="form.invalid">
            invalid
          </span>
          <span class="badge text-bg-primary" *ngIf="form.pending">
            pending
          </span>
          <span class="badge text-bg-primary" *ngIf="form.untouched">
            untouched
          </span>
          <span class="badge text-bg-primary" *ngIf="form.submitted">
            submitted
          </span>
          <span class="badge text-bg-primary" *ngIf="form.enabled">
            enabled
          </span>
        </div>
        <pre>
          {{ form.value | json }}
        </pre>
      </div>
      <hr />
      <h3>Load User</h3>
      <button class="btn btn-light" (click)="loadUser()">Load User</button>
    </div>
  </div>
</ng-container>
